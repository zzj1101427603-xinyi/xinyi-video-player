name: âœ… éªŒè¯é¡¹ç›®é…ç½®

on:
  workflow_dispatch

jobs:
  verify:
    runs-on: ubuntu-latest
    
    steps:
      - name: 1. æ£€æŸ¥é¡¹ç›®ç»“æ„
        uses: actions/checkout@v3
        
      - name: 2. éªŒè¯å…³é”®æ–‡ä»¶
        run: |
          echo "ğŸ‰ æ­å–œï¼é¡¹ç›®é…ç½®éªŒè¯å¼€å§‹"
          echo ""
          
          # æ£€æŸ¥assetsæ–‡ä»¶å¤¹
          echo "ğŸ“ æ£€æŸ¥Assetsæ–‡ä»¶å¤¹:"
          if [ -d "assets" ] && [ -f "assets/icon.png" ] && [ -f "assets/splash.png" ]; then
            echo "   âœ… Assetsæ–‡ä»¶å¤¹æ­£ç¡®ï¼ŒåŒ…å«æ‰€æœ‰å›¾æ ‡æ–‡ä»¶"
            echo "   å›¾æ ‡æ–‡ä»¶å¤§å°:"
            ls -lh assets/*.png
          else
            echo "   âŒ Assetsæ–‡ä»¶å¤¹æˆ–å›¾æ ‡æ–‡ä»¶ç¼ºå¤±"
            exit 1
          fi
          
          echo ""
          echo "ğŸ“„ æ£€æŸ¥é…ç½®æ–‡ä»¶:"
          # æ£€æŸ¥App.js
          if grep -q "ä¸ºäº†é¦¨é€¸" App.js; then
            echo "   âœ… App.jsåŒ…å«æ­£ç¡®çš„æ¬¢è¿æ ‡è¯­"
          else
            echo "   âŒ App.jså†…å®¹ä¸æ­£ç¡®"
          fi
          
          # æ£€æŸ¥app.json
          if grep -q "é¦¨é€¸è¶…å¯çˆ±" app.json; then
            echo "   âœ… app.jsoné…ç½®æ­£ç¡®"
          else
            echo "   âŒ app.jsonå†…å®¹ä¸æ­£ç¡®"
          fi
          
          # æ£€æŸ¥package.json
          if [ -f "package.json" ]; then
            echo "   âœ… package.jsonå­˜åœ¨"
          else
            echo "   âŒ package.jsonä¸å­˜åœ¨"
          fi
          
          echo ""
          echo "ğŸ¯ éªŒè¯å®Œæˆï¼æ‰€æœ‰é…ç½®æ–‡ä»¶å°±ç»ª"
          echo ""
          echo "ğŸ“± æ‚¨ç°åœ¨å¯ä»¥ï¼š"
          echo "   1. åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šæ„å»ºAPK"
          echo "   2. ä½¿ç”¨åœ¨çº¿æ„å»ºæœåŠ¡"
          echo "   3. å°†APKå®‰è£…åˆ°iQOO Z5æ‰‹æœº"
          
      - name: 3. ç”ŸæˆæˆåŠŸæŠ¥å‘Š
        run: |
          echo "# ğŸ‰ é¡¹ç›®éªŒè¯æˆåŠŸæŠ¥å‘Š" > SUCCESS_REPORT.md
          echo "" >> SUCCESS_REPORT.md
          echo "## æ­å–œï¼æ‚¨çš„é¡¹ç›®å·²å®Œå…¨é…ç½®å¥½" >> SUCCESS_REPORT.md
          echo "" >> SUCCESS_REPORT.md
          echo "âœ… æ‰€æœ‰æ–‡ä»¶ä½ç½®æ­£ç¡®" >> SUCCESS_REPORT.md
          echo "âœ… å›¾æ ‡æ–‡ä»¶å·²å°±ä½" >> SUCCESS_REPORT.md
          echo "âœ… é…ç½®æ–‡ä»¶å®Œæ•´" >> SUCCESS_REPORT.md
          echo "" >> SUCCESS_REPORT.md
          echo "## ğŸ› ï¸ å¦‚ä½•æ„å»ºAPKï¼š" >> SUCCESS_REPORT.md
          echo "" >> SUCCESS_REPORT.md
          echo "### æ–¹æ³•ä¸€ï¼šä½¿ç”¨Android Studioï¼ˆæ¨èï¼‰" >> SUCCESS_REPORT.md
          echo "1. ä¸‹è½½ [Android Studio](https://developer.android.com/studio)" >> SUCCESS_REPORT.md
          echo "2. ä¸‹è½½æœ¬é¡¹ç›®ä»£ç ï¼šç‚¹å‡»GitHubé¡µé¢ç»¿è‰²CodeæŒ‰é’® â†’ Download ZIP" >> SUCCESS_REPORT.md
          echo "3. è§£å‹ZIPæ–‡ä»¶åˆ°ç”µè„‘" >> SUCCESS_REPORT.md
          echo "4. æ‰“å¼€Android Studioï¼Œé€‰æ‹©'Open an existing project'" >> SUCCESS_REPORT.md
          echo "5. é€‰æ‹©è§£å‹åçš„æ–‡ä»¶å¤¹" >> SUCCESS_REPORT.md
          echo "6. ç­‰å¾…é¡¹ç›®åŠ è½½å®Œæˆåï¼Œç‚¹å‡» Build â†’ Build Bundle(s)/APK(s) â†’ Build APK(s)" >> SUCCESS_REPORT.md
          echo "7. APKæ–‡ä»¶å°†ç”Ÿæˆåœ¨ï¼š`app/build/outputs/apk/debug/`" >> SUCCESS_REPORT.md
          echo "" >> SUCCESS_REPORT.md
          echo "### æ–¹æ³•äºŒï¼šä½¿ç”¨å‘½ä»¤è¡Œ" >> SUCCESS_REPORT.md
          echo "```bash" >> SUCCESS_REPORT.md
          echo "# 1. å®‰è£…Android SDK" >> SUCCESS_REPORT.md
          echo "# 2. å…‹éš†é¡¹ç›®" >> SUCCESS_REPORT.md
          echo "git clone https://github.com/æ‚¨çš„ç”¨æˆ·å/xinyi-video-player.git" >> SUCCESS_REPORT.md
          echo "cd xinyi-video-player" >> SUCCESS_REPORT.md
          echo "# 3. æ„å»ºAPK" >> SUCCESS_REPORT.md
          echo "cd android" >> SUCCESS_REPORT.md
          echo "./gradlew assembleDebug" >> SUCCESS_REPORT.md
          echo "```" >> SUCCESS_REPORT.md
          echo "" >> SUCCESS_REPORT.md
          echo "### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨åœ¨çº¿æ„å»ºæœåŠ¡" >> SUCCESS_REPORT.md
          echo "1. è®¿é—® [appmaker.xyz](https://appmaker.xyz)" >> SUCCESS_REPORT.md
          echo "2. ä¸Šä¼ æœ¬é¡¹ç›®æ–‡ä»¶" >> SUCCESS_REPORT.md
          echo "3. é€‰æ‹©Android APKæ„å»º" >> SUCCESS_REPORT.md
          echo "4. ç­‰å¾…æ„å»ºå®Œæˆå¹¶ä¸‹è½½APK" >> SUCCESS_REPORT.md
          echo "" >> SUCCESS_REPORT.md
          echo "## ğŸ“± å®‰è£…åˆ°iQOO Z5æ‰‹æœºï¼š" >> SUCCESS_REPORT.md
          echo "1. åœ¨æ‰‹æœºè®¾ç½®ä¸­å¼€å¯'USBè°ƒè¯•'å’Œ'å…è®¸å®‰è£…æœªçŸ¥æ¥æºåº”ç”¨'" >> SUCCESS_REPORT.md
          echo "2. é€šè¿‡USBè¿æ¥æ‰‹æœºå’Œç”µè„‘" >> SUCCESS_REPORT.md
          echo "3. å°†APKæ–‡ä»¶å¤åˆ¶åˆ°æ‰‹æœº" >> SUCCESS_REPORT.md
          echo "4. åœ¨æ‰‹æœºæ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰¾åˆ°APKæ–‡ä»¶å¹¶å®‰è£…" >> SUCCESS_REPORT.md
          echo "" >> SUCCESS_REPORT.md
          echo "## ğŸ¯ é¡¹ç›®åŠŸèƒ½ï¼š" >> SUCCESS_REPORT.md
          echo "- å¯åŠ¨ç”»é¢ï¼š'é¦¨é€¸è¶…å¯çˆ± - ä¸ºäº†é¦¨é€¸ï¼ŒåŠ å€åŠªåŠ›ï¼'" >> SUCCESS_REPORT.md
          echo "- åå°éŸ³é¢‘æ’­æ”¾æ”¯æŒ" >> SUCCESS_REPORT.md
          echo "- é€šçŸ¥æ æ§åˆ¶" >> SUCCESS_REPORT.md
          echo "- é”å±æ’­æ”¾æ”¯æŒ" >> SUCCESS_REPORT.md
          echo "- ä¸“ä¸ºiQOO Z5ä¼˜åŒ–" >> SUCCESS_REPORT.md
          
      - name: 4. ä¸Šä¼ æˆåŠŸæŠ¥å‘Š
        uses: actions/upload-artifact@v4
        with:
          name: æˆåŠŸæŠ¥å‘Š
          path: SUCCESS_REPORT.md
